# IoT-Based Autonomous Robot for the Visually Impaired
한이음 ICT 멘토링 금상 (2024)  
시각장애인의 안전하고 편리한 보행을 지원하기 위한 IoT 자율주행 스마트 보행 도우미 로봇

---

## 프로젝트 개요
**프로젝트명:** 시각 장애인의 보행을 위한 IoT 자율주행 로봇  
**기관:** 프로보노 ICT멘토링 (한국정보산업연합회)  
**수행 기간:** 2024.03 ~ 2024.11  
**역할:** 팀원 (UWB 거리 측정 및 앱 개발 담당)  
**수상:** 2024 프로보노 ICT멘토링 금상  

### 프로젝트 목표
로봇 위치 인식(UWB) + 교통 신호 인식(OpenCV) + 장애물 감지(Lidar)를 결합한  
스마트 보행 보조 시스템(Smart Walking Assistant) 개발

---

## 시스템 구성

### 1. 하드웨어
- Jetson Nano (Vision AI 연산)
- ESP32 (UWB + BLE 통신)
- UWB Module (Anchor / Tag)
- Lidar 센서 (장애물 감지)
- 전원부, 진동 모터, 스피커

### 2. 펌웨어
- ESP32(Arduino IDE 기반)  
- SPI 통신을 통한 UWB 모듈 제어  
- BLE 통신으로 거리 데이터를 앱에 전송

### 3. 모바일 앱 (App Inventor)
- BLE 연결: ESP32와 실시간 거리 통신  
- UI: 거리값 표시 및 음성 안내  
- TTS: 로봇과의 거리 변화 시 음성 안내  
- ASR: "앱 열음", "로봇찾음" 등 음성 명령  
- 진동 알림: 2m 이내 접근 시 진동 발생  

---

## 세부 내용

### 1. 아키텍처 개선 (리모컨 → 앱)
- 리모컨 방식은 무겁고 조작이 어려워 사용성이 떨어졌음  
- BLE 기반 스마트폰 앱으로 구조를 전환  
- 결과적으로 휴대성과 접근성이 향상되었음

### 2. UWB 거리 측정 로직
- UWB(Ultra-Wideband)는 앵커(Anchor)와 태그(Tag) 간 ToF(Time of Flight) 기반으로 거리 측정  
- ESP32 + UWB 모듈 일체형 보드를 사용  
- BLE를 통해 거리 데이터를 실시간으로 전송

### 3. 노이즈 보정 (Kalman Filter)
- 문제: 장애물이나 인체 간섭 시 거리값이 순간적으로 튐  
- 해결: 칼만 필터 적용  
  - 예측 단계: 이전 거리값으로 다음 거리 추정  
  - 갱신 단계: 실제 측정값으로 보정  
- 결과: 거리값 안정화 및 신뢰도 향상

### 4. 앱 설계
- 시각장애인용 접근성 중심 설계  
- BLE 연결 후 실시간 거리 확인  
- 거리 변화에 따라 음성 및 진동 안내  
- 음성 인식을 통한 앱 열기/닫기 및 기능 실행  
- App Inventor를 사용하여 구현

---

## 비전 인식 알고리즘 (Jetson Nano + YOLO)
1. 초기화 후 OpenCV의 `cap.isOpened()`로 영상 프레임 단위 처리  
2. 각 프레임에서 횡단보도를 감지하고, `process()` 함수를 통해 소실점을 계산  
3. HSV 색공간에서 흰색 범위를 설정하여 필터링  
4. 침식(Erosion) 연산으로 노이즈 제거 후 흰색 선 강조  
5. 컨투어(윤곽선) 검출로 횡단보도 선 식별  
6. 검출된 컨투어 주변에 경계 상자(Bounding Box) 표시 및 좌표 수집  
7. RANSAC 알고리즘으로 왼쪽/오른쪽 선의 직선 모델 추정  
8. Cramer’s Rule로 두 직선의 교차점(소실점) 계산  
9. 카메라 기준에서 소실점 방향 벡터를 계산  
10. 방향 벡터를 기반으로 이동 방향을 계산 및 갱신하여 실시간 보행 안내

---

## 개인 담당 파트
- ESP32 + UWB 모듈 기반 거리 측정 시스템 설계  
- UWB 거리값 안정화를 위한 칼만 필터 적용  
- BLE 통신을 통해 거리 정보를 모바일 앱으로 전송  
- App Inventor로 시각장애인용 보행 보조 앱 개발  
  - 거리 실시간 표시  
  - 음성 안내(TTS) 및 음성 인식(ASR) 기능  
  - 진동 피드백 기능  

---

## 프로젝트 성과
- 2024 프로보노 ICT멘토링 금상 수상  
- 리모컨 기반 제어 방식을 BLE 스마트폰 앱 기반으로 개편하여 휴대성과 접근성을 대폭 향상  
- UWB 거리 측정의 불안정성 문제(전파 간섭)에 대해 **직접 칼만 필터(Kalman Filter)를 구현**하여 노이즈를 보정  
  - 필터 적용 전: 평균 거리 오차 약 ±10 cm  
  - 필터 적용 후: ±3 cm 수준으로 감소, 약 70% 정확도 향상 달성  
  - 오차율은 RMS(Root Mean Square) 방식으로 산출하여 필터 적용 전후 데이터를 비교 분석함  
  - 결과적으로 측정 데이터의 신뢰성이 크게 향상되어 전체 시스템의 안정성이 개선됨  
- Jetson Nano 기반 YOLO 비전 모델을 활용하여 교통 신호 및 횡단보도 인식 기능 구현  
- 시각장애인용 App Inventor 기반 BLE 연동 앱 개발  
  - 거리 표시, 음성 안내(TTS), 음성 명령(ASR), 진동 알림 기능 완성  
- 로봇-사용자 간 거리 피드백 및 실시간 보행 지원 기능을 통합 구현 

---

## 기술 스택
- Hardware: ESP32, UWB, Jetson Nano, Lidar  
- Software: Arduino IDE, App Inventor  
- Communication: BLE, SPI  
- Algorithm: Kalman Filter

---
